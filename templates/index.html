<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roadmap Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Frappe Gantt -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/frappe-gantt/dist/frappe-gantt.css">
    <script src="https://cdn.jsdelivr.net/npm/frappe-gantt/dist/frappe-gantt.umd.js"></script>
    <!-- PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>Roadmap Dashboard</h1>
        <div class="header-actions">
            <select id="yearFilter" class="year-filter">
                <option value="2026">2026</option>
            </select>
            <button id="addGoalBtn" class="btn btn-primary">+ Î™©Ìëú Ï∂îÍ∞Ä</button>
            <button id="addMemberBtn" class="btn btn-secondary">+ Ïù∏Î†• Ï∂îÍ∞Ä</button>
            <div class="dropdown" id="dataManageDropdown">
                <button class="btn btn-outline dropdown-toggle" id="dataManageBtn">
                    Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨ ‚ñæ
                </button>
                <div class="dropdown-menu" id="dataManageMenu">
                    <button class="dropdown-item" id="exportPdfBtn">PDF ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
                    <button class="dropdown-item" id="exportDbBtn">DB ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
                    <button class="dropdown-item" id="importDbBtn">DB Í∞ÄÏ†∏Ïò§Í∏∞</button>
                    <div class="dropdown-divider"></div>
                    <button class="dropdown-item dropdown-item-danger" id="resetDataBtn">Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú</button>
                </div>
            </div>
            <input type="file" id="dbFileInput" accept=".db" style="display: none;">
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
        <button class="tab-btn active" data-tab="dashboard">ÎåÄÏãúÎ≥¥Îìú</button>
        <button class="tab-btn" data-tab="goal-manager">Î™©Ìëú Í¥ÄÎ¶¨</button>
        <button class="tab-btn" data-tab="members">Ïù∏Î†• Í¥ÄÎ¶¨</button>
        <button class="tab-btn" data-tab="brainstorming">Î∏åÎ†àÏù∏Ïä§ÌÜ†Î∞ç</button>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <div class="tab-content active" id="dashboard">
            <!-- Summary Cards -->
            <section class="summary-cards">
                <div class="card summary-card">
                    <div class="card-icon">üéØ</div>
                    <div class="card-content">
                        <span class="card-value" id="totalGoals">0</span>
                        <span class="card-label">Ï†ÑÏ≤¥ Î™©Ìëú</span>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon">üìç</div>
                    <div class="card-content">
                        <span class="card-value" id="totalMilestones">0</span>
                        <span class="card-label">ÎßàÏùºÏä§ÌÜ§</span>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon">‚úÖ</div>
                    <div class="card-content">
                        <span class="card-value" id="totalTasks">0</span>
                        <span class="card-label">ÌÉúÏä§ÌÅ¨</span>
                    </div>
                </div>
                <div class="card summary-card">
                    <div class="card-icon">üìä</div>
                    <div class="card-content">
                        <span class="card-value" id="overallProgress">0%</span>
                        <span class="card-label">Ï†ÑÏ≤¥ ÏßÑÏ≤ôÎ•†</span>
                    </div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts-section charts-two-cols">
                <div class="card chart-card">
                    <h3>Ïú†ÌòïÎ≥Ñ ÏßÑÏ≤ôÎ•†</h3>
                    <canvas id="typeChart"></canvas>
                </div>
                <div class="card chart-card">
                    <h3>Ï†úÌíàÎ≥Ñ ÏßÑÏ≤ôÎ•†</h3>
                    <canvas id="productChart"></canvas>
                </div>
            </section>

            <!-- Gantt Chart Section -->
            <section class="gantt-section">
                <div class="card">
                    <div class="gantt-header">
                        <h3>Î°úÎìúÎßµ ÌÉÄÏûÑÎùºÏù∏</h3>
                        <div class="gantt-controls">
                            <div class="gantt-scroll-to">
                                <label>Ïù¥Îèô:</label>
                                <select id="ganttScrollYear" class="gantt-scroll-select" onchange="GanttChart.scrollToSelectedDate()">
                                    <option value="2025">2025</option>
                                    <option value="2026" selected>2026</option>
                                    <option value="2027">2027</option>
                                </select>
                                <select id="ganttScrollQuarter" class="gantt-scroll-select" onchange="GanttChart.scrollToSelectedDate()">
                                    <option value="1">1Q (1Ïõî)</option>
                                    <option value="2">2Q (4Ïõî)</option>
                                    <option value="3">3Q (7Ïõî)</option>
                                    <option value="4">4Q (10Ïõî)</option>
                                </select>
                            </div>
                            <div class="gantt-view-modes">
                                <button class="btn btn-sm" data-mode="Week">Ï£º</button>
                                <button class="btn btn-sm active" data-mode="Month">Ïõî</button>
                            </div>
                        </div>
                    </div>
                    <div class="gantt-container" id="gantt"></div>
                </div>
            </section>

            <!-- Goals Tree Section -->
            <section class="goals-section">
                <div class="card">
                    <h3>Î™©Ìëú Î™©Î°ù</h3>
                    <div class="goals-filter">
                        <select id="typeFilter">
                            <option value="">Ï†ÑÏ≤¥ Ïú†Ìòï</option>
                            <option value="issue">Î¨∏Ï†úÏ†ê Í∞úÏÑ†</option>
                            <option value="feature">Ïã†Í∑ú Í∏∞Îä•</option>
                            <option value="feedback">ÏÇ¨Ïö©Ïûê ÌîºÎìúÎ∞±</option>
                        </select>
                        <select id="teamFilter">
                            <option value="">Ï†ÑÏ≤¥ ÌåÄ</option>
                        </select>
                    </div>
                    <div id="goalsTree" class="goals-tree"></div>
                </div>
            </section>
        </div>

        <!-- Goal Manager Section -->
        <div class="tab-content" id="goal-manager">
            <section class="goal-manager-section">
                <div class="kanban-header">
                    <h3>Î™©Ìëú ÏùºÏ†ï Í¥ÄÎ¶¨</h3>
                    <p class="kanban-help">Î™©Ìëú Ïπ¥ÎìúÎ•º ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏõêÌïòÎäî Î∂ÑÍ∏∞Î°ú Ïù¥ÎèôÌïòÏÑ∏Ïöî</p>
                </div>
                <div class="kanban-board" id="kanbanBoard">
                    <div class="kanban-column" data-quarter="backlog">
                        <div class="kanban-column-header">
                            <span class="column-title">Î∞±Î°úÍ∑∏</span>
                            <span class="column-count">0</span>
                        </div>
                        <div class="kanban-column-body" data-quarter="backlog"></div>
                    </div>
                    <div class="kanban-column" data-quarter="Q1">
                        <div class="kanban-column-header">
                            <span class="column-title">Q1 (1-3Ïõî)</span>
                            <span class="column-count">0</span>
                        </div>
                        <div class="kanban-column-body" data-quarter="Q1"></div>
                    </div>
                    <div class="kanban-column" data-quarter="Q2">
                        <div class="kanban-column-header">
                            <span class="column-title">Q2 (4-6Ïõî)</span>
                            <span class="column-count">0</span>
                        </div>
                        <div class="kanban-column-body" data-quarter="Q2"></div>
                    </div>
                    <div class="kanban-column" data-quarter="Q3">
                        <div class="kanban-column-header">
                            <span class="column-title">Q3 (7-9Ïõî)</span>
                            <span class="column-count">0</span>
                        </div>
                        <div class="kanban-column-body" data-quarter="Q3"></div>
                    </div>
                    <div class="kanban-column" data-quarter="Q4">
                        <div class="kanban-column-header">
                            <span class="column-title">Q4 (10-12Ïõî)</span>
                            <span class="column-count">0</span>
                        </div>
                        <div class="kanban-column-body" data-quarter="Q4"></div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Members Section -->
        <div class="tab-content" id="members">
            <section class="members-section">
                <!-- Summary Cards -->
                <div class="members-overview">
                    <div class="card members-stats-card">
                        <h3>Ïù∏Î†• ÌòÑÌô©</h3>
                        <div class="members-summary">
                            <div class="member-stat">
                                <span class="stat-value" id="existingCount">0</span>
                                <span class="stat-label">Í∏∞Ï°¥ Ïù∏Î†•</span>
                            </div>
                            <div class="member-stat">
                                <span class="stat-value" id="newCount">0</span>
                                <span class="stat-label">Ïã†Í∑ú Ïù∏Î†•</span>
                            </div>
                            <div class="member-stat total">
                                <span class="stat-value" id="totalMembers">0</span>
                                <span class="stat-label">Ï†ÑÏ≤¥</span>
                            </div>
                        </div>
                        <div id="roleDistribution" class="role-distribution"></div>
                    </div>
                    <div class="card product-assignment-card">
                        <h3>Î∞∞Ïπò ÏòàÏ†ï</h3>
                        <div id="productAssignments" class="product-assignments"></div>
                    </div>
                </div>

                <!-- Member List -->
                <div class="card">
                    <div class="members-header">
                        <h3>Ïù∏Î†• Î™©Î°ù</h3>
                        <button id="addMemberBtn2" class="btn btn-primary">+ Ïù∏Î†• Ï∂îÍ∞Ä</button>
                    </div>
                    <div class="members-filter">
                        <select id="memberTypeFilter">
                            <option value="">Ï†ÑÏ≤¥ Ïú†Ìòï</option>
                            <option value="existing">Í∏∞Ï°¥ Ïù∏Î†•</option>
                            <option value="new">Ïã†Í∑ú Ïù∏Î†•</option>
                        </select>
                        <select id="memberRoleFilter">
                            <option value="">Ï†ÑÏ≤¥ Ïó≠Ìï†</option>
                            <option value="PM">PM</option>
                            <option value="Developer">Developer</option>
                            <option value="Designer">Designer</option>
                            <option value="QA">QA</option>
                        </select>
                    </div>
                    <div id="membersList" class="members-list"></div>
                </div>
            </section>
        </div>

        <!-- Brainstorming Section -->
        <div class="tab-content" id="brainstorming">
            <section class="brainstorming-section">
                <div class="card">
                    <div class="brainstorming-header">
                        <h3>ÏïÑÏù¥ÎîîÏñ¥ Î™©Î°ù</h3>
                        <button id="addIdeaBtn" class="btn btn-primary">+ ÏïÑÏù¥ÎîîÏñ¥ Ï∂îÍ∞Ä</button>
                    </div>
                    <div class="ideas-summary">
                        <div class="idea-stat">
                            <span class="stat-value" id="openIdeasCount">0</span>
                            <span class="stat-label">Í≤ÄÌÜ† Ï§ë</span>
                        </div>
                        <div class="idea-stat">
                            <span class="stat-value" id="approvedIdeasCount">0</span>
                            <span class="stat-label">ÏäπÏù∏Îê®</span>
                        </div>
                        <div class="idea-stat">
                            <span class="stat-value" id="convertedIdeasCount">0</span>
                            <span class="stat-label">Î™©Ìëú Ï†ÑÌôò</span>
                        </div>
                        <div class="idea-stat">
                            <span class="stat-value" id="totalIdeasCount">0</span>
                            <span class="stat-label">Ï†ÑÏ≤¥</span>
                        </div>
                    </div>
                    <div class="ideas-filter">
                        <select id="ideaStatusFilter">
                            <option value="">Ï†ÑÏ≤¥ ÏÉÅÌÉú</option>
                            <option value="open">Í≤ÄÌÜ† Ï§ë</option>
                            <option value="approved">ÏäπÏù∏Îê®</option>
                            <option value="rejected">Í±∞Ï†àÎê®</option>
                            <option value="converted">Î™©Ìëú Ï†ÑÌôò</option>
                        </select>
                        <select id="ideaTypeFilter">
                            <option value="">Ï†ÑÏ≤¥ Ïú†Ìòï</option>
                            <option value="issue">Î¨∏Ï†úÏ†ê Í∞úÏÑ†</option>
                            <option value="feature">Ïã†Í∑ú Í∏∞Îä•</option>
                            <option value="feedback">ÏÇ¨Ïö©Ïûê ÌîºÎìúÎ∞±</option>
                        </select>
                        <select id="ideaPriorityFilter">
                            <option value="">Ï†ÑÏ≤¥ Ïö∞ÏÑ†ÏàúÏúÑ</option>
                            <option value="1">ÎÜíÏùå</option>
                            <option value="2">Ï§ëÍ∞Ñ</option>
                            <option value="3">ÎÇÆÏùå</option>
                        </select>
                    </div>
                    <div id="ideasList" class="ideas-list"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- Edit Panel (Slide from right) -->
    <aside class="edit-panel" id="editPanel">
        <div class="edit-panel-header">
            <h2 id="editPanelTitle">Ìé∏Ïßë</h2>
            <button class="btn-close" id="closeEditPanel">&times;</button>
        </div>
        <div class="edit-panel-content" id="editPanelContent">
            <!-- Dynamic form content -->
        </div>
    </aside>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Scripts -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/editor.js"></script>
    <script src="/static/js/dashboard.js"></script>
    <script src="/static/js/gantt.js"></script>
    <script src="/static/js/goal-manager.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
